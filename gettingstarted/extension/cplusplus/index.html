<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(2)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > ul > li:nth-child(2) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/img/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>C++ | Albert</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="C++" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Albert is a unified and efficient access to your machine. Technically it is a keyboard launcher written in C++/Qt. The plugin based architecture makes it extremely flexible and powerful. Plugins can be used to create frontends or functional extensions. Extensions can also be implemented using embedded Python modules or via a CGI approach in any language you want." /> <meta property="og:description" content="Albert is a unified and efficient access to your machine. Technically it is a keyboard launcher written in C++/Qt. The plugin based architecture makes it extremely flexible and powerful. Plugins can be used to create frontends or functional extensions. Extensions can also be implemented using embedded Python modules or via a CGI approach in any language you want." /> <link rel="canonical" href="https://albertlauncher.github.io/gettingstarted/extension/cplusplus/" /> <meta property="og:url" content="https://albertlauncher.github.io/gettingstarted/extension/cplusplus/" /> <meta property="og:site_name" content="Albert" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="C++" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Albert is a unified and efficient access to your machine. Technically it is a keyboard launcher written in C++/Qt. The plugin based architecture makes it extremely flexible and powerful. Plugins can be used to create frontends or functional extensions. Extensions can also be implemented using embedded Python modules or via a CGI approach in any language you want.","headline":"C++","url":"https://albertlauncher.github.io/gettingstarted/extension/cplusplus/"}</script> <!-- End Jekyll SEO tag --> <head> <link rel="stylesheet" href="/assets/css/just-the-docs-albertdark.css" media="(prefers-color-scheme: dark)" /> <link rel="stylesheet" href="/assets/css/just-the-docs-albert.css" media="(prefers-color-scheme: light)" /> </head> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Albert </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted/" class="nav-list-link">Getting started</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Install category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted/install/" class="nav-list-link">Install</a><ul class="nav-list"><li class="nav-list-item"><a href="/gettingstarted/install/macos/" class="nav-list-link">macOS</a></li><li class="nav-list-item"><a href="/gettingstarted/install/linux/" class="nav-list-link">Linux</a></li><li class="nav-list-item"><a href="/gettingstarted/install/source/" class="nav-list-link">From source</a></li></ul></li><li class="nav-list-item"><a href="/gettingstarted/basics/" class="nav-list-link">Basics</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Extension category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted/extension/" class="nav-list-link">Extension</a><ul class="nav-list"><li class="nav-list-item"><a href="/gettingstarted/extension/general/" class="nav-list-link">General</a></li><li class="nav-list-item"><a href="/gettingstarted/extension/cplusplus/" class="nav-list-link">C++</a></li><li class="nav-list-item"><a href="/gettingstarted/extension/python/" class="nav-list-link">Python</a></li></ul></li><li class="nav-list-item"><a href="/gettingstarted/faq/" class="nav-list-link">FAQ</a></li></ul></li><li class="nav-list-item"><a href="/gallery" class="nav-list-link">Gallery</a></li><li class="nav-list-item"><a href="/help/" class="nav-list-link">Help</a></li><li class="nav-list-item"><a href="/news/" class="nav-list-link">News</a></li><li class="nav-list-item"><a href="/contributing/" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="/donation/" class="nav-list-link">Donating</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://albertlauncher.github.io/reference/namespacealbert.html" class="nav-list-link external" > API reference <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://github.com/albertlauncher/albert" class="nav-list-link external" > GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> <!-- intentionally empty to avois showing this: This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.--> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Albert" aria-label="Search Albert" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/gettingstarted/">Getting started</a></li> <li class="breadcrumb-nav-list-item"><a href="/gettingstarted/extension/">Extension</a></li> <li class="breadcrumb-nav-list-item"><span>C++</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="extending-albert-using-c"> <a href="#extending-albert-using-c" class="anchor-heading" aria-labelledby="extending-albert-using-c"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Extending Albert using C++ </h1> <p class="note">This page focuses on the practical aspects of extending Albert using C++ and its peculiarities. To get a high level overview of common concepts of the API refer to the <a href="/gettingstarted/extension/general">general</a> section.</p> <ul id="markdown-toc"> <li><a href="#cmake" id="markdown-toc-cmake">CMake</a></li> <li><a href="#c" id="markdown-toc-c">C++</a></li> <li><a href="#plugin-directories" id="markdown-toc-plugin-directories">Plugin directories</a></li> </ul> <p>A native plugin is a <a href="https://doc.qt.io/qt-6/plugins-howto.html#the-low-level-api-extending-qt-applications">Qt Plugin</a>, i.e. a shared library providing an instance of the class <code class="language-plaintext highlighter-rouge">PluginInstance</code>.</p> <p>Albert provides <code class="language-plaintext highlighter-rouge">C</code> and <code class="language-plaintext highlighter-rouge">CMake</code> macros that implement conventions to streamline the plugin development process and to reduce the considerable amount of boilerplate code required to a few lines of code.</p> <h2 id="cmake"> <a href="#cmake" class="anchor-heading" aria-labelledby="cmake"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> CMake </h2> <p>Having a standardized plugin project structure the <code class="language-plaintext highlighter-rouge">albert_plugin</code> macro takes care of most of the CMake boilerplate code. It is part of the <code class="language-plaintext highlighter-rouge">albert</code> CMake module and can be included using <code class="language-plaintext highlighter-rouge">find_package(Albert REQUIRED)</code>. Read its documentation in the header of the <a href="https://raw.githubusercontent.com/albertlauncher/albert/main/cmake/albert-macros.cmake">CMake module</a> before you proceed.</p> <p>A minimal working CMakeLists.txt (See also the <a href="https://github.com/search?q=repo%3Aalbertlauncher%2Fplugins+path%3A**%2FCMakeLists.txt&amp;type=code">CMakeLists.txt files of the official plugins</a>):</p> <div class="language-cmake highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">project</span><span class="p">(</span>my_plugin VERSION 1.0<span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span>Albert REQUIRED<span class="p">)</span>
<span class="nf">albert_plugin</span><span class="p">()</span>
</code></pre></div></div> <p>This is the standard plugin directory structure of a plugin:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>─┬─  my_plugin      
 ├──  CMakeLists.txt      
 ├──  metadata.json
 ├─┬─  src    
 │ └──  …
 └─┬─  i18n        
   └──  …       
</code></pre></div></div> <p>A basic metadata file looks like this (See also the <a href="https://github.com/search?q=repo%3Aalbertlauncher%2Fplugins+path%3A**%2Fmetadata.json&amp;type=code">metadata.json files of the official plugins</a>):</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Plugin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Do useful stuff"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"authors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"@myname"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"license"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIT"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/myusername/my-albert-plugin"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h2 id="c"> <a href="#c" class="anchor-heading" aria-labelledby="c"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C++ </h2> <p>Albert plugins ultimately have to inherit the <code class="language-plaintext highlighter-rouge">QObject</code> and <a href="https://albertlauncher.github.io/reference/classalbert_1_1PluginInstance.html"><code class="language-plaintext highlighter-rouge">PluginInstance</code></a> class and contain the <code class="language-plaintext highlighter-rouge">ALBERT_PLUGIN</code> macro in the declaration body.</p> <p>A basic plugin looks like this (See also the <a href="https://github.com/search?q=repo%3Aalbertlauncher%2Fplugins+path%3A**%2FPlugin.h&amp;type=code">plugin header files of the official plugins</a>):</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#pragma once
#include</span> <span class="cpf">&lt;albert/extensionplugin.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;albert/triggerqueryhandler.h&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Plugin</span> <span class="o">:</span> <span class="k">public</span> <span class="n">QObject</span><span class="p">,</span> <span class="k">public</span> <span class="n">albert</span><span class="o">::</span><span class="n">PluginInstance</span>
<span class="p">{</span>
    <span class="n">ALBERT_PLUGIN</span>
<span class="p">};</span>
</code></pre></div></div> <p>Usually you dont want to subclass <code class="language-plaintext highlighter-rouge">PluginInstance</code> directly but rather <a href="https://albertlauncher.github.io/reference/classalbert_1_1ExtensionPlugin.html"><code class="language-plaintext highlighter-rouge">ExtensionPlugin</code></a> which implements the <a href="https://albertlauncher.github.io/reference/classalbert_1_1Extension.html"><code class="language-plaintext highlighter-rouge">Extension</code></a> interface using the metadata of the plugin instance.</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#pragma once
#include</span> <span class="cpf">&lt;albert/extensionplugin.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;albert/triggerqueryhandler.h&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Plugin</span> <span class="o">:</span> <span class="k">public</span> <span class="n">albert</span><span class="o">::</span><span class="n">ExtensionPlugin</span><span class="p">,</span>
               <span class="k">public</span> <span class="n">albert</span><span class="o">::</span><span class="n">TriggerQueryHandler</span>
<span class="p">{</span>
    <span class="n">ALBERT_PLUGIN</span>
    <span class="kt">void</span> <span class="n">handleTriggerQuery</span><span class="p">(</span><span class="n">albert</span><span class="o">::</span><span class="n">Query</span> <span class="o">&amp;</span><span class="p">)</span> <span class="k">override</span> <span class="p">{}</span>
<span class="p">};</span>
</code></pre></div></div> <p>From here on it depends on the interface you want to implement. Read through the <a href="https://albertlauncher.github.io/reference/namespacealbert.html">albert namespace reference</a>. See the <a href="https://github.com/albertlauncher/plugins/tree/main/">official native plugins</a> as a reference. Concise examples to start with are: <code class="language-plaintext highlighter-rouge">debug</code>, <code class="language-plaintext highlighter-rouge">timezones</code>, <code class="language-plaintext highlighter-rouge">hash</code> or <code class="language-plaintext highlighter-rouge">urlhandler</code>.</p> <h2 id="plugin-directories"> <a href="#plugin-directories" class="anchor-heading" aria-labelledby="plugin-directories"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Plugin directories </h2> <p>The plugin directories depends on the platform and the build type.</p> <ul> <li><strong>Linux</strong>: <ul> <li><code class="language-plaintext highlighter-rouge">~/.local/{lib,lib64}/albert</code></li> <li><code class="language-plaintext highlighter-rouge">/usr/local/{lib,lib64}/albert</code></li> <li><code class="language-plaintext highlighter-rouge">/usr/lib/${MULTIARCH_TUPLE}/albert</code></li> <li><code class="language-plaintext highlighter-rouge">/usr/{lib,lib64}/albert</code></li> </ul> </li> <li><strong>macOS</strong>: <ul> <li><code class="language-plaintext highlighter-rouge">$BUNDLE_PATH/Contents/PlugIns</code></li> <li><code class="language-plaintext highlighter-rouge">~/Library/Application Support/Albert/plugins</code></li> </ul> </li> </ul> <p>The plugin directories are scanned in the order of the above list. On start Albert scans the plugin directories for available plugins. Since identifiers have to be unique, duplicate plugins with the same identifier (project name) are skipped.</p> </main> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/albertlauncher/documentation/edit/master/src/gettingstarted/extension/cplusplus.md" id="edit-this-page">Edit this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
