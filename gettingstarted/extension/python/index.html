<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(3)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > ul > li:nth-child(3) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/img/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Python | Albert</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Python" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Albert is a unified and efficient access to your machine. Technically it is a keyboard launcher written in C++/Qt. The plugin based architecture makes it extremely flexible and powerful. Plugins can be used to create frontends or functional extensions. Extensions can also be implemented using embedded Python modules or via a CGI approach in any language you want." /> <meta property="og:description" content="Albert is a unified and efficient access to your machine. Technically it is a keyboard launcher written in C++/Qt. The plugin based architecture makes it extremely flexible and powerful. Plugins can be used to create frontends or functional extensions. Extensions can also be implemented using embedded Python modules or via a CGI approach in any language you want." /> <link rel="canonical" href="https://albertlauncher.github.io/gettingstarted/extension/python/" /> <meta property="og:url" content="https://albertlauncher.github.io/gettingstarted/extension/python/" /> <meta property="og:site_name" content="Albert" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Python" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Albert is a unified and efficient access to your machine. Technically it is a keyboard launcher written in C++/Qt. The plugin based architecture makes it extremely flexible and powerful. Plugins can be used to create frontends or functional extensions. Extensions can also be implemented using embedded Python modules or via a CGI approach in any language you want.","headline":"Python","url":"https://albertlauncher.github.io/gettingstarted/extension/python/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Albert </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted/" class="nav-list-link">Getting started</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Install category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted/install/" class="nav-list-link">Install</a><ul class="nav-list"><li class="nav-list-item"><a href="/gettingstarted/install/macos/" class="nav-list-link">macOS</a></li><li class="nav-list-item"><a href="/gettingstarted/install/linux/" class="nav-list-link">Linux</a></li><li class="nav-list-item"><a href="/gettingstarted/install/source/" class="nav-list-link">From source</a></li></ul></li><li class="nav-list-item"><a href="/gettingstarted/basics/" class="nav-list-link">Basics</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Extension category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/gettingstarted/extension/" class="nav-list-link">Extension</a><ul class="nav-list"><li class="nav-list-item"><a href="/gettingstarted/extension/general/" class="nav-list-link">General</a></li><li class="nav-list-item"><a href="/gettingstarted/extension/cplusplus/" class="nav-list-link">C++</a></li><li class="nav-list-item"><a href="/gettingstarted/extension/python/" class="nav-list-link">Python</a></li></ul></li><li class="nav-list-item"><a href="/gettingstarted/faq/" class="nav-list-link">FAQ</a></li></ul></li><li class="nav-list-item"><a href="/help/" class="nav-list-link">Help</a></li><li class="nav-list-item"><a href="/news/" class="nav-list-link">News</a></li><li class="nav-list-item"><a href="/contributing/" class="nav-list-link">Contributing</a></li><li class="nav-list-item"><a href="/donation/" class="nav-list-link">Donating</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://albertlauncher.github.io/reference/namespacealbert.html" class="nav-list-link external" > API reference <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li><li class="nav-list-item external"> <a href="https://github.com/albertlauncher/albert" class="nav-list-link external" > GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Albert" aria-label="Search Albert" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/gettingstarted/">Getting started</a></li> <li class="breadcrumb-nav-list-item"><a href="/gettingstarted/extension/">Extension</a></li> <li class="breadcrumb-nav-list-item"><span>Python</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc" id="extending-albert-using-python"> <a href="#extending-albert-using-python" class="anchor-heading" aria-labelledby="extending-albert-using-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Extending Albert using Python </h1> <p class="note">This page focuses on the practical aspects of extending Albert using Python and its peculiarities. To get a high level overview of common concepts of the API refer to the <a href="/gettingstarted/extension/general">general</a> section.</p> <ul id="markdown-toc"> <li><a href="#the-albert-stub-file" id="markdown-toc-the-albert-stub-file">The Albert stub file</a></li> <li><a href="#python-plugin-directories" id="markdown-toc-python-plugin-directories">Python plugin directories</a></li> <li><a href="#writing-python-plugins" id="markdown-toc-writing-python-plugins">Writing Python plugins</a></li> <li><a href="#technical-notes-and-limitations" id="markdown-toc-technical-notes-and-limitations">Technical notes and limitations</a></li> <li><a href="#contributing-python-plugins" id="markdown-toc-contributing-python-plugins">Contributing Python plugins</a></li> </ul> <h2 id="the-albert-stub-file"> <a href="#the-albert-stub-file" class="anchor-heading" aria-labelledby="the-albert-stub-file"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The Albert stub file </h2> <p>The Albert Python interface is defined in the <a href="https://github.com/albertlauncher/plugins/blob/main/python/albert.pyi"><strong>Albert Python stub file</strong></a>. This file serves as documentation for the embedded <code class="language-plaintext highlighter-rouge">albert</code> module, and its module docstring describes the interface that makes a Python module an Albert Python plugin.</p> <p>The stub file is written to your <em>user Python plugin directory</em>. This is also where you are supposed to put your personal plugins. There the stub file serves as inline documention and coding assistance in your IDE while developing plugins.</p> <h2 id="python-plugin-directories"> <a href="#python-plugin-directories" class="anchor-heading" aria-labelledby="python-plugin-directories"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Python plugin directories </h2> <p>Python plugin directories are the subdirectories <code class="language-plaintext highlighter-rouge">python/plugins</code> in the <em>app data directories</em>. For more information on app data directories, especially their precedence order, see <a href="https://albertlauncher.github.io/gettingstarted/faq/#where-are-cache-config-and-data-files-stored">this table</a>.</p> <p>When loaded, the <em>Python plugins plugin</em> (the native plugin that provides the Python interface) scans the <em>Python plugin directories</em> for available <em>Python plugins</em>. Since identifiers have to be unique, duplicate plugins with the same identifier (module name) are skipped.</p> <h2 id="writing-python-plugins"> <a href="#writing-python-plugins" class="anchor-heading" aria-labelledby="writing-python-plugins"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Writing Python plugins </h2> <p>A minimal working example of a Python plugin according to the interface specification looks like this:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">albert</span>

<span class="n">md_iid</span> <span class="o">=</span> <span class="sh">'</span><span class="s">3.0</span><span class="sh">'</span>
<span class="n">md_version</span> <span class="o">=</span> <span class="sh">'</span><span class="s">1.0</span><span class="sh">'</span>
<span class="n">md_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Fancy Plugin</span><span class="sh">'</span>
<span class="n">md_description</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Do fancy things</span><span class="sh">'</span>

<span class="k">class</span> <span class="nc">Plugin</span><span class="p">(</span><span class="n">albert</span><span class="p">.</span><span class="n">PluginInstance</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div></div> <p>From here on it depends on the interface you want to implement. Read the <a href="https://github.com/albertlauncher/plugins/blob/main/python/albert.pyi">Python stub file</a>. In case of questions see the <a href="/reference/namespacealbert.html">C++ API</a>. See the <a href="https://github.com/albertlauncher/python">official Python plugins</a> for reference. The <code class="language-plaintext highlighter-rouge">color</code> plugin is a concise example to start with.</p> <h2 id="technical-notes-and-limitations"> <a href="#technical-notes-and-limitations" class="anchor-heading" aria-labelledby="technical-notes-and-limitations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Technical notes and limitations </h2> <ul> <li>Due to the different type systems, <strong>multiple virtual inheritance of extension interfaces is not supported</strong>. However, multiple extensions can be added by reimplementing <code class="language-plaintext highlighter-rouge">albert.PluginInstance.extensions()</code>.</li> <li>Python plugin execution is subject to the <a href="https://en.wikipedia.org/wiki/Global_interpreter_lock">Python Global Interpreter Lock (GIL)</a>. This means that only one thread can execute Python code at a time. This can become a problem for parallelization of queries or multithreaded global queries. Long running handlers will introduce noticeable lags. <strong>Do not block</strong> execution in your query handlers, especially not in <code class="language-plaintext highlighter-rouge">handleGlobalQuery</code>. If you can, use <code class="language-plaintext highlighter-rouge">IndexQueryHandler</code> instead, which performs the handling in C++ space.</li> <li>PyBind11 <strong>method resolution does not support mixin behavior</strong>. Usually this should not be much of a problem, but there is one prevalent use case: Reusing <code class="language-plaintext highlighter-rouge">id</code>, <code class="language-plaintext highlighter-rouge">name</code> and <code class="language-plaintext highlighter-rouge">description</code> of the <code class="language-plaintext highlighter-rouge">PluginInstance</code> class for your <code class="language-plaintext highlighter-rouge">Extension</code>. For the sake of minimal boilerplate the mixin behavior is emulated for these methods. I.e. if you inherit <code class="language-plaintext highlighter-rouge">PluginInstance</code> and any <code class="language-plaintext highlighter-rouge">Extension</code>, you do not have to reimplement these methods.</li> </ul> <h2 id="contributing-python-plugins"> <a href="#contributing-python-plugins" class="anchor-heading" aria-labelledby="contributing-python-plugins"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Contributing Python plugins </h2> <ul> <li><a href="https://github.com/albertlauncher/python/fork">Fork the Python plugins repository</a>.</li> <li>Clone your fork into your Python user plugin location. <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/&lt;your_username&gt;/python.git <span class="s2">"</span><span class="k">${</span><span class="nv">USER_DATA_DIR</span><span class="k">}</span><span class="s2">/python/plugins"</span>
</code></pre></div> </div> <p>You can find the <code class="language-plaintext highlighter-rouge">${USER_DATA_DIR}</code> for your platform in <a href="https://albertlauncher.github.io/gettingstarted/faq/#where-are-cache-config-and-data-files-stored">this table</a>.</p> </li> <li>Open the directory in your favorite IDE (PyCharmCE is a good choice).</li> <li>Write your plugin.</li> <li>Make sure it is polished (No bugs, few to no warnings, efficient, readable, maintainable, …).</li> <li>Commit, push, send a PR.</li> </ul> </main> <hr> <footer> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/albertlauncher/documentation/edit/master/src/gettingstarted/extension/python.md" id="edit-this-page">Edit this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
