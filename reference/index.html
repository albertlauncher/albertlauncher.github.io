<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Albert: C++/Qt plugins</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="albert.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Albert
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">C++/Qt plugins </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_albert_plugins_README"></a> A native plugin is a <a href="https://doc.qt.io/qt-6/plugins-howto.html#the-low-level-api-extending-qt-applications">Qt Plugin</a>, i.e. a shared library providing a particular interface. Their distribution is not that trivial due to ABI compatibilitiy (system libraries, compiler(-flags), system architecture, Qt versions, etcâ€¦). Therefore developing native plugins is rather worth it if you plan to get your code upstream and finally be shipped with the official plugins. For personal workflows or less complex use cases Python plugins are the way to go.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Getting started</h1>
<p >The easiest way to build plugins is to checkout the source tree and build the entire app including plugins. Open the CMake project in your favourite C++ IDE and make it build and run. From there on you could simply copy an existing plugin. The following gives a brief overview. Details may change every now and then anyway.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
CMake</h2>
<p >Having a standardized plugin project structure the <code>albert_plugin</code> macro takes care of most CMake boilerplate code you will need. Read the documentation header of the <a href="https://raw.githubusercontent.com/albertlauncher/albert/main/cmake/albert-macros.cmake">CMake module</a> before you proceed.</p>
<p >A minimal working CMakeLists.txt:</p>
<div class="fragment"><div class="line">cmake_minimum_required(VERSION 3.16)</div>
<div class="line">project(my_plugin VERSION 1.0)</div>
<div class="line">find_package(Albert REQUIRED)</div>
<div class="line">albert_plugin()</div>
</div><!-- fragment --><p >Check the <a href="https://github.com/search?q=repo%3Aalbertlauncher%2Fplugins+path%3A**%2FCMakeLists.txt&amp;type=code">CMakeLists.txt files</a> of the official plugins for reference.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Metadata</h2>
<p >A minimal metadata file:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;name&quot;: &quot;My Plugin&quot;,</div>
<div class="line">    &quot;description&quot;: &quot;Do useful stuff&quot;,</div>
<div class="line">    &quot;authors&quot;: [&quot;@myname&quot;],</div>
<div class="line">    &quot;license&quot;: &quot;MIT&quot;,</div>
<div class="line">    &quot;url&quot;: &quot;https://github.com/myusername/my-albert-plugin&quot;,</div>
<div class="line">}</div>
</div><!-- fragment --><p >Check the <a href="https://github.com/search?q=repo%3Aalbertlauncher%2Fplugins+path%3A**%2Fmetadata.json&amp;type=code">metadata.json files</a> of the official plugins for reference.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
C++</h2>
<p >On the C++ side Qt plugins have to inherit QObject. The relevant base classes do that for you.</p>
<p >They also have to contain the <code>Q_OBJECT</code> macro and set an interface identifier and the metadata. The <code>ALBERT_PLUGIN</code> macro takes care of this.</p>
<p >Albert expects plugins to inherit the <a href="https://albertlauncher.github.io/reference/classalbert_1_1PluginInstance.html"><code>PluginInstance</code></a> class. Usually you dont want to subclass PluginInstance directly but rather <a href="https://albertlauncher.github.io/reference/classalbert_1_1ExtensionPlugin.html"><code>ExtensionPlugin</code></a> which implements the <a href="https://albertlauncher.github.io/reference/classalbert_1_1Extension.html"><code>Extension</code></a> interface using the metadata of PluginInstance. The Extension class is the virtual base of all extension (See the inheritance diagram for the core interfaces).</p>
<p >A working example plugin implementing the GlobalQueryHandler interface:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="extensionplugin_8h.html">albert/extensionplugin.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="globalqueryhandler_8h.html">albert/globalqueryhandler.h</a>&gt;</span></div>
<div class="line"><span class="keyword">class </span>Plugin : <span class="keyword">public</span> <a class="code hl_class" href="classalbert_1_1ExtensionPlugin.html">albert::ExtensionPlugin</a>,</div>
<div class="line">               <span class="keyword">public</span> <a class="code hl_class" href="classalbert_1_1GlobalQueryHandler.html">albert::GlobalQueryHandler</a></div>
<div class="line">{</div>
<div class="line">    <a class="code hl_define" href="plugininstance_8h.html#a8787b7c8c0b456d908480300c22d3f5f">ALBERT_PLUGIN</a></div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    std::vector&lt;albert::RankItem&gt; </div>
<div class="line">    <a class="code hl_function" href="classalbert_1_1GlobalQueryHandler.html#aa16857cb26d70da7130c240589426a8c">handleGlobalQuery</a>(<span class="keyword">const</span> <a class="code hl_class" href="classalbert_1_1Query.html">albert::Query</a>*)<span class="keyword"> const override</span></div>
<div class="line"><span class="keyword">    </span>{ <span class="keywordflow">return</span> {}; }</div>
<div class="line">};</div>
<div class="ttc" id="aclassalbert_1_1ExtensionPlugin_html"><div class="ttname"><a href="classalbert_1_1ExtensionPlugin.html">albert::ExtensionPlugin</a></div><div class="ttdoc">Convenience base class for extension plugins.</div><div class="ttdef"><b>Definition:</b> extensionplugin.h:20</div></div>
<div class="ttc" id="aclassalbert_1_1GlobalQueryHandler_html"><div class="ttname"><a href="classalbert_1_1GlobalQueryHandler.html">albert::GlobalQueryHandler</a></div><div class="ttdoc">Abstract global query handler.</div><div class="ttdef"><b>Definition:</b> globalqueryhandler.h:23</div></div>
<div class="ttc" id="aclassalbert_1_1GlobalQueryHandler_html_aa16857cb26d70da7130c240589426a8c"><div class="ttname"><a href="classalbert_1_1GlobalQueryHandler.html#aa16857cb26d70da7130c240589426a8c">albert::GlobalQueryHandler::handleGlobalQuery</a></div><div class="ttdeci">virtual std::vector&lt; RankItem &gt; handleGlobalQuery(const Query *)=0</div><div class="ttdoc">The query handling function.</div></div>
<div class="ttc" id="aclassalbert_1_1Query_html"><div class="ttname"><a href="classalbert_1_1Query.html">albert::Query</a></div><div class="ttdoc">Common query object.</div><div class="ttdef"><b>Definition:</b> query.h:20</div></div>
<div class="ttc" id="aextensionplugin_8h_html"><div class="ttname"><a href="extensionplugin_8h.html">extensionplugin.h</a></div></div>
<div class="ttc" id="aglobalqueryhandler_8h_html"><div class="ttname"><a href="globalqueryhandler_8h.html">globalqueryhandler.h</a></div></div>
<div class="ttc" id="aplugininstance_8h_html_a8787b7c8c0b456d908480300c22d3f5f"><div class="ttname"><a href="plugininstance_8h.html#a8787b7c8c0b456d908480300c22d3f5f">ALBERT_PLUGIN</a></div><div class="ttdeci">#define ALBERT_PLUGIN</div><div class="ttdoc">Declare a class as native Albert plugin.</div><div class="ttdef"><b>Definition:</b> plugininstance.h:101</div></div>
</div><!-- fragment --><p >Check the <a href="https://github.com/search?q=repo%3Aalbertlauncher%2Fplugins+path%3A**%2FPlugin.h&amp;type=code">plugin header files</a> of the official plugins for reference.</p>
<p >Ultimately you want to display <a href="https://albertlauncher.github.io/reference/classalbert_1_1Item.html"><code>Item</code></a>s and use their <a href="https://albertlauncher.github.io/reference/classalbert_1_1Action.html"><code>Action</code></a>s.</p>
<p >Other classes worth noting:</p><ul>
<li><a href="https://albertlauncher.github.io/reference/classalbert_1_1StandardItem.html"><code>StandardItem</code></a></li>
<li><a href="https://albertlauncher.github.io/reference/classalbert_1_1Query.html"><code>Query</code></a></li>
<li><a href="https://albertlauncher.github.io/reference/classalbert_1_1TriggerQueryHandler.html"><code>TriggerQueryHandler</code></a></li>
<li><a href="https://albertlauncher.github.io/reference/classalbert_1_1IndexQueryHandler.html"><code>IndexQueryHandler</code></a></li>
<li><a href="https://albertlauncher.github.io/reference/classalbert_1_1FallbackHandler.html"><code>FallbackHandler</code></a></li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
What's next?</h2>
<ul>
<li>There are a lot of utilities. Read/Skim through the <a href="https://albertlauncher.github.io/reference/namespacealbert.html">albert namespace reference</a>.</li>
<li>See the <a href="https://github.com/albertlauncher/plugins/tree/main/">official native plugins</a> as a reference.</li>
<li>Read the <a href="https://github.com/albertlauncher/albert/tree/main/">source code</a>.</li>
<li>Join the <a href="https://albertlauncher.github.io/help/#chats">community chats</a>.</li>
<li>Build something cool and share it.</li>
<li>Enjoy Albert! </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5 </li>
  </ul>
</div>
</body>
</html>
